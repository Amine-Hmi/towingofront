{"ast":null,"code":"\"use strict\";\n\nvar _extends = require(\"@babel/runtime/helpers/extends\");\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\n\nvar _inherits = require(\"@babel/runtime/helpers/inherits\");\n\nvar _possibleConstructorReturn = require(\"@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"@babel/runtime/helpers/getPrototypeOf\");\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importDefault(require(\"react\"));\n\nvar react_native_1 = require(\"react-native-web/dist/index\");\n\nvar country_1 = __importDefault(require(\"./country\"));\n\nvar flags_1 = __importDefault(require(\"./resources/flags\"));\n\nvar phoneNumber_1 = __importDefault(require(\"./phoneNumber\"));\n\nvar styles_1 = __importDefault(require(\"./styles\"));\n\nvar CountryPicker_1 = __importDefault(require(\"./CountryPicker\"));\n\nvar PhoneInput = function (_react_1$default$Comp) {\n  _inherits(PhoneInput, _react_1$default$Comp);\n\n  var _super = _createSuper(PhoneInput);\n\n  function PhoneInput(props) {\n    var _this;\n\n    _classCallCheck(this, PhoneInput);\n\n    _this = _super.call(this, props);\n\n    _this.onChangePhoneNumber = function (number) {\n      var actionAfterSetState = _this.props.onChangePhoneNumber ? function (displayValue, iso2) {\n        var _a, _b;\n\n        (_b = (_a = _this.props).onChangePhoneNumber) === null || _b === void 0 ? void 0 : _b.call(_a, displayValue, iso2);\n      } : null;\n\n      _this.updateValue(number, actionAfterSetState);\n    };\n\n    _this.onPressFlag = function () {\n      if (_this.props.onPressFlag) {\n        _this.props.onPressFlag();\n      } else {\n        if (_this.state.iso2) _this.picker.selectCountry(_this.state.iso2);\n\n        _this.picker.show();\n      }\n    };\n\n    _this.getFlag = function (iso2) {\n      return flags_1.default.get(iso2);\n    };\n\n    _this.getISOCode = function () {\n      return _this.state.iso2;\n    };\n\n    _this.selectCountry = function (iso2) {\n      if (_this.state.iso2 !== iso2) {\n        var countryData = phoneNumber_1.default.getCountryDataByCode(iso2);\n\n        if (countryData) {\n          _this.setState({\n            iso2: iso2,\n            displayValue: _this.format(\"+\" + countryData.dialCode),\n            value: \"+\" + countryData.dialCode\n          }, function () {\n            if (_this.props.onSelectCountry) _this.props.onSelectCountry(iso2);\n          });\n        }\n      }\n    };\n\n    _this.setValue = function (number) {\n      if (_this.state.value !== number) {\n        _this.updateValue(number);\n      }\n    };\n\n    var _this$props = _this.props,\n        initialCountry = _this$props.initialCountry,\n        initialValue = _this$props.initialValue;\n    var _this$props2 = _this.props,\n        countriesList = _this$props2.countriesList,\n        disabled = _this$props2.disabled;\n\n    if (countriesList) {\n      country_1.default.setCustomCountriesData(countriesList);\n    }\n\n    var displayValue = '';\n\n    if (initialValue) {\n      if (initialValue[0] !== '+') {\n        initialValue = \"+\" + initialValue;\n      }\n\n      initialCountry = phoneNumber_1.default.getCountryCodeOfNumber(initialValue);\n      displayValue = _this.format(initialValue, initialCountry);\n    } else {\n      var countryData = phoneNumber_1.default.getCountryDataByCode(initialCountry);\n      initialValue = countryData ? \"+\" + countryData.dialCode : '';\n      displayValue = initialValue;\n    }\n\n    _this.state = {\n      disabled: disabled,\n      iso2: initialCountry,\n      displayValue: displayValue,\n      value: initialValue\n    };\n    return _this;\n  }\n\n  _createClass(PhoneInput, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var disabled = this.props.disabled;\n\n      if (disabled !== this.state.disabled) {\n        this.setState({\n          disabled: disabled\n        });\n      }\n    }\n  }, {\n    key: \"getPickerData\",\n    value: function getPickerData() {\n      return phoneNumber_1.default.getAllCountries().map(function (country, index) {\n        return {\n          key: index,\n          image: flags_1.default.get(country.iso2),\n          label: country.name,\n          dialCode: \"+\" + country.dialCode,\n          iso2: country.iso2\n        };\n      });\n    }\n  }, {\n    key: \"getCountryCode\",\n    value: function getCountryCode() {\n      var countryData = phoneNumber_1.default.getCountryDataByCode(this.state.iso2);\n      return countryData ? countryData.dialCode : null;\n    }\n  }, {\n    key: \"getAllCountries\",\n    value: function getAllCountries() {\n      return phoneNumber_1.default.getAllCountries();\n    }\n  }, {\n    key: \"getDialCode\",\n    value: function getDialCode() {\n      return phoneNumber_1.default.getDialCode(this.state.value);\n    }\n  }, {\n    key: \"getValue\",\n    value: function getValue(text) {\n      return text ? text.replace(/[^0-9]/g, '') : this.state.value;\n    }\n  }, {\n    key: \"getNumberType\",\n    value: function getNumberType() {\n      return phoneNumber_1.default.getNumberType(this.state.value, this.state.iso2);\n    }\n  }, {\n    key: \"isValidNumber\",\n    value: function isValidNumber() {\n      if (this.state.value.length < 4) return false;\n      return phoneNumber_1.default.isValidNumber(this.state.value, this.state.iso2);\n    }\n  }, {\n    key: \"format\",\n    value: function format(text, iso2) {\n      return this.props.autoFormat ? phoneNumber_1.default.format(text, iso2 || this.state.iso2) : text;\n    }\n  }, {\n    key: \"updateValue\",\n    value: function updateValue(number) {\n      var actionAfterSetState = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var modifiedNumber = this.getValue(number);\n      var allowZeroAfterCountryCode = this.props.allowZeroAfterCountryCode;\n\n      if (modifiedNumber[0] !== '+' && number.length) {\n        modifiedNumber = \"+\" + modifiedNumber;\n      }\n\n      modifiedNumber = allowZeroAfterCountryCode ? modifiedNumber : this.possiblyEliminateZeroAfterCountryCode(modifiedNumber);\n      var iso2 = phoneNumber_1.default.getCountryCodeOfNumber(modifiedNumber);\n      var displayValue = this.format(modifiedNumber);\n      this.setState({\n        iso2: iso2,\n        displayValue: displayValue,\n        value: modifiedNumber\n      }, function () {\n        if (actionAfterSetState) {\n          actionAfterSetState(displayValue, iso2);\n        }\n      });\n    }\n  }, {\n    key: \"possiblyEliminateZeroAfterCountryCode\",\n    value: function possiblyEliminateZeroAfterCountryCode(number) {\n      var dialCode = phoneNumber_1.default.getDialCode(number);\n      return number.startsWith(dialCode + \"0\") ? dialCode + number.substr(dialCode.length + 1) : number;\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      this.inputPhone.focus();\n    }\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      this.inputPhone.blur();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          iso2 = _this$state.iso2,\n          displayValue = _this$state.displayValue,\n          disabled = _this$state.disabled;\n      var TextComponent = this.props.textComponent || react_native_1.TextInput;\n      return react_1.default.createElement(react_native_1.View, {\n        style: [styles_1.default.container, this.props.style]\n      }, react_1.default.createElement(react_native_1.TouchableWithoutFeedback, {\n        onPress: this.onPressFlag,\n        disabled: disabled\n      }, react_1.default.createElement(react_native_1.Image, {\n        source: flags_1.default.get(iso2),\n        style: [styles_1.default.flag, this.props.flagStyle]\n      })), react_1.default.createElement(react_native_1.View, {\n        style: {\n          flex: 1,\n          marginLeft: this.props.offset || 10\n        }\n      }, react_1.default.createElement(TextComponent, _extends({\n        ref: function ref(_ref) {\n          _this2.inputPhone = _ref;\n        },\n        editable: !disabled,\n        autoCorrect: false,\n        style: [styles_1.default.text, this.props.textStyle],\n        onChangeText: function onChangeText(text) {\n          _this2.onChangePhoneNumber(text);\n        },\n        keyboardType: \"phone-pad\",\n        underlineColorAndroid: \"rgba(0,0,0,0)\",\n        value: displayValue\n      }, this.props.textProps))), react_1.default.createElement(CountryPicker_1.default, {\n        ref: function ref(_ref2) {\n          _this2.picker = _ref2;\n        },\n        selectedCountry: iso2,\n        onSubmit: this.selectCountry,\n        buttonColor: this.props.pickerButtonColor,\n        cancelText: this.props.cancelText,\n        cancelTextStyle: this.props.cancelTextStyle,\n        confirmText: this.props.confirmText,\n        confirmTextStyle: this.props.confirmTextStyle,\n        pickerBackgroundColor: this.props.pickerBackgroundColor,\n        itemStyle: this.props.pickerItemStyle,\n        onPressCancel: this.props.onPressCancel,\n        onPressConfirm: this.props.onPressConfirm\n      }));\n    }\n  }], [{\n    key: \"setCustomCountriesData\",\n    value: function setCustomCountriesData(json) {\n      country_1.default.setCustomCountriesData(json);\n    }\n  }]);\n\n  return PhoneInput;\n}(react_1.default.Component);\n\nexports.default = PhoneInput;","map":{"version":3,"sources":["../src/PhoneInput.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport {\n    Image, TextInput, TouchableWithoutFeedback, View\n} from 'react-native';\nimport Country from './country';\nimport Flags from './resources/flags';\nimport PhoneNumber from './phoneNumber';\nimport styles from './styles';\nimport CountryPicker from './CountryPicker';\nimport { ReactNativePhoneInputProps } from './typings';\n\nexport default class PhoneInput<TextComponentType extends React.ComponentType = typeof TextInput>\n    extends React.Component<ReactNativePhoneInputProps<TextComponentType>, any> {\n    static setCustomCountriesData(json) {\n        Country.setCustomCountriesData(json);\n    }\n\n    private picker: any;\n\n    private inputPhone: any;\n\n    constructor(props) {\n        super(props);\n\n        let {\n            initialCountry, initialValue\n        } = this.props;\n\n        const {\n            countriesList, disabled,\n        } = this.props;\n\n        if (countriesList) {\n            Country.setCustomCountriesData(countriesList);\n        }\n\n        let displayValue = '';\n\n        if (initialValue) {\n            if (initialValue[0] !== '+') {\n                initialValue = `+${initialValue}`;\n            }\n\n            initialCountry = PhoneNumber.getCountryCodeOfNumber(initialValue);\n            displayValue = this.format(initialValue, initialCountry);\n        } else {\n            const countryData = PhoneNumber.getCountryDataByCode(initialCountry);\n            initialValue = countryData ? `+${countryData.dialCode}` : '';\n            displayValue = initialValue;\n        }\n\n        this.state = {\n            disabled,\n            iso2: initialCountry,\n            displayValue,\n            value: initialValue,\n        };\n    }\n\n    componentDidUpdate() {\n        const { disabled } = this.props;\n        if (disabled !== this.state.disabled) {\n            this.setState({ disabled }); // eslint-disable-line react/no-did-update-set-state\n        }\n    }\n\n    onChangePhoneNumber = (number) => {\n        const actionAfterSetState = this.props.onChangePhoneNumber\n            ? (displayValue: string, iso2: string) => {\n                    this.props.onChangePhoneNumber?.(displayValue, iso2);\n            }\n            : null;\n        this.updateValue(number, actionAfterSetState);\n    }\n\n    onPressFlag = () => {\n        if (this.props.onPressFlag) {\n            this.props.onPressFlag();\n        } else {\n            if (this.state.iso2) this.picker.selectCountry(this.state.iso2);\n            this.picker.show();\n        }\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getPickerData() {\n        return PhoneNumber.getAllCountries().map((country, index) => ({\n            key: index,\n            image: Flags.get(country.iso2),\n            label: country.name,\n            dialCode: `+${country.dialCode}`,\n            iso2: country.iso2\n        }));\n    }\n\n    getCountryCode() {\n        const countryData = PhoneNumber.getCountryDataByCode(this.state.iso2);\n        return countryData ? countryData.dialCode : null;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getAllCountries() {\n        return PhoneNumber.getAllCountries();\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getFlag = (iso2) => Flags.get(iso2);\n\n    getDialCode() {\n        return PhoneNumber.getDialCode(this.state.value);\n    }\n\n    getValue(text?) {\n        return text ? text.replace(/[^0-9]/g, '') : this.state.value;\n    }\n\n    getNumberType() {\n        return PhoneNumber.getNumberType(\n            this.state.value,\n            this.state.iso2\n        );\n    }\n\n    getISOCode = () => this.state.iso2;\n\n    selectCountry = (iso2) => {\n        if (this.state.iso2 !== iso2) {\n            const countryData = PhoneNumber.getCountryDataByCode(iso2);\n            if (countryData) {\n                this.setState(\n                    {\n                        iso2,\n                        displayValue: this.format(`+${countryData.dialCode}`),\n                        value: `+${countryData.dialCode}`\n                    },\n                    () => {\n                        if (this.props.onSelectCountry) this.props.onSelectCountry(iso2);\n                    }\n                );\n            }\n        }\n    }\n\n    setValue = (number) => {\n        if (this.state.value !== number) {\n            this.updateValue(number);\n        }\n    }\n\n    isValidNumber() {\n        if (this.state.value.length < 4) return false;\n        return PhoneNumber.isValidNumber(\n            this.state.value,\n            this.state.iso2\n        );\n    }\n\n    format(text, iso2?) {\n        return this.props.autoFormat\n            ? PhoneNumber.format(text, iso2 || this.state.iso2)\n            : text;\n    }\n\n    updateValue(number, actionAfterSetState: any = null) {\n        let modifiedNumber = this.getValue(number);\n        const { allowZeroAfterCountryCode } = this.props;\n\n        if (modifiedNumber[0] !== '+' && number.length) {\n            modifiedNumber = `+${modifiedNumber}`;\n        }\n        modifiedNumber = allowZeroAfterCountryCode\n            ? modifiedNumber\n            : this.possiblyEliminateZeroAfterCountryCode(modifiedNumber);\n        const iso2: string = PhoneNumber.getCountryCodeOfNumber(modifiedNumber);\n\n        const displayValue = this.format(modifiedNumber);\n\n        this.setState({\n            iso2,\n            displayValue,\n            value: modifiedNumber,\n        }, () => {\n            if (actionAfterSetState) {\n                actionAfterSetState(displayValue, iso2);\n            }\n        });\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    possiblyEliminateZeroAfterCountryCode(number) {\n        const dialCode = PhoneNumber.getDialCode(number);\n        return number.startsWith(`${dialCode}0`)\n            ? dialCode + number.substr(dialCode.length + 1)\n            : number;\n    }\n\n    focus() {\n        this.inputPhone.focus();\n    }\n\n    blur() {\n        this.inputPhone.blur();\n    }\n\n    render() {\n        const { iso2, displayValue, disabled } = this.state;\n        const TextComponent: any = this.props.textComponent || TextInput;\n        return (\n            <View style={[styles.container, this.props.style]}>\n                <TouchableWithoutFeedback\n                    onPress={this.onPressFlag}\n                    disabled={disabled}\n                >\n                    <Image\n                        source={Flags.get(iso2)}\n                        style={[styles.flag, this.props.flagStyle]}\n                    />\n                </TouchableWithoutFeedback>\n                <View style={{ flex: 1, marginLeft: this.props.offset || 10 }}>\n                    <TextComponent\n                        ref={(ref) => {\n                            this.inputPhone = ref;\n                        }}\n                        editable={!disabled}\n                        autoCorrect={false}\n                        style={[styles.text, this.props.textStyle]}\n                        onChangeText={(text) => {\n                            this.onChangePhoneNumber(text);\n                        }}\n                        keyboardType=\"phone-pad\"\n                        underlineColorAndroid=\"rgba(0,0,0,0)\"\n                        value={displayValue}\n                        {...this.props.textProps}\n                    />\n                </View>\n\n                <CountryPicker\n                    ref={(ref) => {\n                        this.picker = ref;\n                    }}\n                    selectedCountry={iso2}\n                    onSubmit={this.selectCountry}\n                    buttonColor={this.props.pickerButtonColor}\n                    cancelText={this.props.cancelText}\n                    cancelTextStyle={this.props.cancelTextStyle}\n                    confirmText={this.props.confirmText}\n                    confirmTextStyle={this.props.confirmTextStyle}\n                    pickerBackgroundColor={this.props.pickerBackgroundColor}\n                    itemStyle={this.props.pickerItemStyle}\n                    onPressCancel={this.props.onPressCancel}\n                    onPressConfirm={this.props.onPressConfirm}\n                />\n            </View>\n        );\n    }\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}